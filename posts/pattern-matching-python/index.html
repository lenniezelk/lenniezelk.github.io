<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Leonard Kioi "><meta name=description content="Python 3.10 has introduced Pattern Matching. I&amp;rsquo;ve been eager to try this out for some time now. I first found out about pattern matching when I tried out Elixir lang a while back. Python 3.10 is still pre-release, you can download it here or use asdf to install it.
Let&amp;rsquo;s go through some use-cases which will help in gaining a good grasp of what&amp;rsquo;s possible with pattern matching. In my day job, I use the Django web framework for developing web applications and create RESTful APIs."><meta name=keywords content="portfolio,leonard,kioi,kinyanjui,software,software craftsman,engineer,programming,python"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://lkioi.me/posts/pattern-matching-python/><title>Pattern Matching in Python :: Leonard Kioi</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=/main.c46cbca46fa76c0fcd3da8313ecf4adee5fb3ffb0288c0902d7e90aead220d79.css><meta itemprop=name content="Pattern Matching in Python"><meta itemprop=description content="Python 3.10 has introduced Pattern Matching. I&rsquo;ve been eager to try this out for some time now. I first found out about pattern matching when I tried out Elixir lang a while back. Python 3.10 is still pre-release, you can download it here or use asdf to install it.
Let&rsquo;s go through some use-cases which will help in gaining a good grasp of what&rsquo;s possible with pattern matching. In my day job, I use the Django web framework for developing web applications and create RESTful APIs."><meta itemprop=datePublished content="2021-03-20T14:11:52+03:00"><meta itemprop=dateModified content="2021-03-20T14:11:52+03:00"><meta itemprop=wordCount content="334"><meta itemprop=keywords content="programming,python,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Pattern Matching in Python"><meta name=twitter:description content="Python 3.10 has introduced Pattern Matching. I&rsquo;ve been eager to try this out for some time now. I first found out about pattern matching when I tried out Elixir lang a while back. Python 3.10 is still pre-release, you can download it here or use asdf to install it.
Let&rsquo;s go through some use-cases which will help in gaining a good grasp of what&rsquo;s possible with pattern matching. In my day job, I use the Django web framework for developing web applications and create RESTful APIs."><meta property="article:published_time" content="2021-03-20 14:11:52 +0300 +0300"></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>hello</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/posts/>Posts</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 minutes</p></div><article><h1 class=post-title><a href=https://lkioi.me/posts/pattern-matching-python/>Pattern Matching in Python</a></h1><div class=post-content><p>Python 3.10 has introduced <a href=https://en.wikipedia.org/wiki/Pattern_matching>Pattern Matching</a>. I&rsquo;ve been eager to try this out for some time now. I first found out about pattern matching when I tried out Elixir lang a while back. Python 3.10 is still pre-release, you can download it <a href=https://www.python.org/downloads/release/python-3100a6/>here</a> or use <a href=https://asdf-vm.com/#/>asdf</a> to install it.</p><p>Let&rsquo;s go through some use-cases which will help in gaining a good grasp of what&rsquo;s possible with pattern matching. In my day job, I use the Django web framework for developing web applications and create RESTful APIs. A common pattern when creating objects and saving in DB is:</p><script type=application/javascript src=https://gist.github.com/lenniezelk/60d3b9e545ce122da522a0c803450c64.js></script><p><code>get_or_create</code> returns a tuple of the user and a bool indicating whether the user was created or was just fetched from DB.</p><p>A different approach using pattern matching would be:</p><script type=application/javascript src=https://gist.github.com/lenniezelk/941ccd8709a220729ee6715ba5ae8997.js></script><p>The first case matches when a new user is created, and the second matches when the user was not created.
Now, this takes away the readability a bit but <code>get_or_create</code> is common enough in Django to allow for this. In most cases weigh out the loss of readability vs the gains particularly in the beginning before pattern matching becomes common in the Python community.</p><p>Pattern matching allows for guards. Let&rsquo;s say you need to carry out some action if the newly created user is a superuser:</p><script type=application/javascript src=https://gist.github.com/lenniezelk/12a0c84cfc94bb03670b80b8e92fe03b.js></script><p>The first case would match for newly created superusers and the second for the other newly created users.</p><p>Another use-case would be pattern matching the response code when fetching data from the internet using for example the requests library:</p><script type=application/javascript src=https://gist.github.com/lenniezelk/e7e4c4427347aa5fdff1bdfd9b66e25b.js></script><p>The <code>401 | 403</code> is combining several literals in a single pattern. In other words <code>401 or 403</code>.</p><p>It is possible to pattern match on dictionary key and values. For example, if you fetch some data and want to extract specific fields from the response dict:</p><script type=application/javascript src=https://gist.github.com/lenniezelk/9032ff0aacf00a59c7dd254d3019f118.js></script><p>The first case captures the values for <code>id</code> and <code>email</code> and ignores the rest.</p><p>I hope this whets your appetite for pattern matching in Python. To learn more on this have a look at Guido&rsquo;s <a href=https://github.com/gvanrossum/patma#tutorial>tutorial</a>.</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://lkioi.me/tags/programming/>programming</a></span>
<span class=tag><a href=https://lkioi.me/tags/python/>python</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>334 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2021-03-20 11:11</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h></span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://lkioi.me/posts/python-remove-prefix-suffix/><span class=button__text>Python's removesuffix and removeprefix</span>
<span class=button__icon>â†’</span></a></span></div></div></main></div><footer class=footer><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://lkioi.me/>Leonard Kioi</a></span>
<span></span><span><a href=https://lkioi.me/posts/index.xml target=_blank title=rss><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></span></div></div><div class=footer__inner><div class=footer__content><span>Powered by <a href=http://gohugo.io>Hugo</a></span><span>Theme with &#10084; by <a href=https://github.com/rhazdon>Djordje Atlialp</a></span></div></div></footer></div><script type=text/javascript src=/bundle.min.599099f1f14b78b657d524b28e10e0c5098e7cd46e9c7aed73d577068a276c3ff1bb234cbf29cb313333e83cf411727b43157c91ce5b809e2ffc81664614608e.js integrity="sha512-WZCZ8fFLeLZX1SSyjhDgxQmOfNRunHrtc9V3BoonbD/xuyNMvynLMTMz6Dz0EXJ7QxV8kc5bgJ4v/IFmRhRgjg=="></script></body></html>